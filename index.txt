<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>Chen MathHub</title>
    
    <link rel="apple-touch-icon" href="icon.png">
    <link rel="icon" href="icon.png" type="image/png">

    <meta name="apple-mobile-web-app-capable" content="yes">
    
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <meta name="apple-mobile-web-app-title" content="MathHub">

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <style>
        /* 样式重置：黑底，无边距，无滚动条 */
        body { margin: 0; overflow: hidden; background-color: #111; }
        canvas { display: block; width: 100%; height: 100%; }
        
        /* 加载提示文字 */
        #loading {
            position: absolute; top: 50%; left: 50%; 
            transform: translate(-50%, -50%);
            color: #888; font-family: sans-serif; font-size: 1rem;
            pointer-events: none; /* 让鼠标穿透文字直接操作模型 */
        }
    </style>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
</head>
<body>

    <div id="loading">正在加载 Chen MathHub...</div>

    <script>
        // ==========================================
        //  MathHub 3D 场景逻辑 (Three.js)
        // ==========================================
        
        // 1. 创建场景
        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0x111111); // 深灰背景，突出几何体

        // 2. 创建相机
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.z = 5;

        // 3. 创建渲染器
        const renderer = new THREE.WebGLRenderer({ antialias: true }); // 开启抗锯齿，线条更平滑
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(window.devicePixelRatio); // 适配 iPad 高清屏
        document.body.appendChild(renderer.domElement);

        // 4. 添加灯光 (为了让物体有立体感)
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.5); // 环境光
        scene.add(ambientLight);
        const pointLight = new THREE.PointLight(0xffffff, 1);
        pointLight.position.set(10, 10, 10);
        scene.add(pointLight);

        // 5. 创建演示物体：一个旋转的“数学结构” (正十二面体 + 线框)
        const geometry = new THREE.DodecahedronGeometry(1.8);
        
        // 材质A：半透明蓝色实体
        const material = new THREE.MeshPhongMaterial({ 
            color: 0x0077ff, 
            transparent: true, 
            opacity: 0.8,
            flatShading: true
        });
        const mesh = new THREE.Mesh(geometry, material);

        // 材质B：白色线框 (增加数学教学的严谨感)
        const wireframeGeometry = new THREE.WireframeGeometry(geometry);
        const wireframeMaterial = new THREE.LineBasicMaterial({ color: 0xffffff });
        const wireframe = new THREE.LineSegments(wireframeGeometry, wireframeMaterial);
        
        mesh.add(wireframe); // 把线框套在实体上
        scene.add(mesh);

        // 6. 动画循环
        function animate() {
            requestAnimationFrame(animate);
            
            // 慢慢旋转
            mesh.rotation.x += 0.005;
            mesh.rotation.y += 0.01;

            renderer.render(scene, camera);
        }
        
        // 隐藏加载文字，开始动画
        document.getElementById('loading').style.display = 'none';
        animate();

        // 7. 窗口大小自适应 (iPad 横竖屏切换时自动调整)
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });
        
        // 8. 交互交互优化：在 iPad 上禁止手指拖动整个网页 (橡皮筋效果)
        document.body.addEventListener('touchmove', function(e) { 
            e.preventDefault(); 
        }, { passive: false });

    </script>
</body>
</html>